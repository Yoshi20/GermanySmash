.row
  .col
    %h1.page__title= "Players"

-# player list
.row.mt-3
  .col
    %table.table.table-hover.table-borderless
      %thead
        %tr
          %th.text-center #
          %th.text-center.d-none.d-md-block Points
          %th Gamer tag
          %th.text-center Mains
          %th.text-center.d-none.d-md-block Self assessment
          %th.text-center.d-none.d-md-block XP
          %th.text-center.d-none.d-md-block W/L

      %tbody.table-content.with-show
        - if @players.any?
          - last_player_points = nil
          - @players.each_with_index do |player, i|
            %tr{'data-id': player.id, 'data-component'=>'player'}
              %td.text-center= (last_player_points == player.points) ? '' : "#{i+1}."
              %td.text-center.d-none.d-md-block= player.points
              - last_player_points = player.points
              %td= player.gamer_tag
              %td.text-center
                - if player.main_characters.any?
                  %div
                    - player.main_characters[0...3].each do |char|
                      - if File.file?("#{Rails.root}/app/assets/images/characters/#{char}.png")
                        = image_tag "characters/#{char}.png", height: '25px', width: '25px'
              %td.text-center.d-none.d-md-block= player.self_assessment ? self_assessment_defines[player.self_assessment] : 'Undefined'
              %td.text-center.d-none.d-md-block= player.tournament_experience ? tournament_experience_defines[player.tournament_experience] : 'Undefined'
              %td.text-center.d-none.d-md-block
                - if player.losses == 0 and player.wins == 0
                  = '-'
                - else
                  = "#{(player.wins.to_f/(player.wins+player.losses)*100).round(2)} %"
