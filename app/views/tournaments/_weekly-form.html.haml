#tournament-form.sub-form.weekly-tournament
  = form_for @tournament, role: 'form' do |f|

    - if @tournament.errors.any?
      #error_explanation
        %h2= pluralize(@tournament.errors.count, "error") + " prohibited this tournament from being saved:"
        %ul
          - @tournament.errors.full_messages.each do |message|
            %li= message

    %br
    .tournament-subform
      .field.form-group.hidden
        = f.text_field :name, class: 'form-control', value: Time.now.to_s # hack to make a valid name
        = f.text_field :subtype, class: 'form-control', value: 'weekly'
      .field.form-group
        = f.label :registration_deadline
        %br= f.datetime_select :registration_deadline, class: 'form-control', start_year: Time.now.year
      .field.form-group
        = f.label :date, 'Weekly start date'
        %br= f.datetime_select :date, class: 'form-control', start_year: Time.now.year
      .field.form-group
        = f.label :end_date, 'Weekly end date (e.g. the end of the year)'
        %br= f.datetime_select :end_date, class: 'form-control', start_year: Time.now.year
      .field.form-group
        = f.label :city
        = f.text_field :city, class: 'form-control', value: (@tournament.new_record? ? 'Bern' : @tournament.city)
      .field.form-group
        = f.label :location
        %em
          = '(separate new lines with commas)'
        = f.text_field :location, class: 'form-control', value: (@tournament.new_record? ? 'SAC Clublokal, Brunngasse 36, 3011 Bern, 1.OG' : @tournament.location)
      .field.form-group
        = f.label :registration_fee, 'Registration fee [CHF]'
        = f.text_field :registration_fee, class: 'form-control', value: (@tournament.new_record? ? 5 : @tournament.registration_fee)
      .field.form-group
        = f.label :total_seats
        = f.text_field :total_seats, class: 'form-control', value: (@tournament.new_record? ? 40 : @tournament.total_seats)
      .field.form-group
        = f.label :host_username, 'Hostname'
        = f.text_field :host_username, class: 'form-control', value: (@tournament.new_record? ? current_user.username : @tournament.host_username)
      .field.form-group
        = f.label :description, 'Descripton'
        = f.text_area :description, class: 'form-control'
      - if @tournament.new_record?
        .field.form-group.hide
          = f.label :active
          = f.check_box :active, checked: true, style: 'margin-left: 5px;'
      - else
        .field.form-group
          = f.label :setup
          = f.check_box :setup, style: 'margin-left: 5px;'
        .field.form-group
          = f.label :started
          = f.check_box :started, style: 'margin-left: 5px;'
        .field.form-group
          = f.label :finished
          = f.check_box :finished, style: 'margin-left: 5px;'
        .field.form-group
          = f.label :active
          = f.check_box :active, style: 'margin-left: 5px;'

    .actions.form-group
      = f.submit 'Create Weekly Tournament(s)', class:'btn btn-primary form-control'
